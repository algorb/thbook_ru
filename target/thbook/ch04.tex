\eject

\chapter Что мы получаем?. 

\subchapter Информационный файл. 

\subsubchapter Файл журнала. 

Помимо сообщений от Therion'а и других используемых программ, файл журнала содержит информацию о вычисленных значениях магнитного\break склонения и конвергенции меридиана, ошибок колец и искажений скрапов. 

Абсолютная ошибка кольца равна $\sqrt{d_x^2+d_y^2+d_z^2}$, где $d_x$ разность между\break одинаковыми начальными и конечными точками кольца до распределения ошибок, измеренная вдоль оси координат $x$; аналогично для $y$ и $z$.\break Процентная погрешность кольца вычисляется как {\it абсолютная ошибка/\breakдлину кольца}. Средняя ошибка -- это простое арифметическое среднее всех ошибок кольца. 

Искажение скрапа вычисляется с использованием меры искажения,\break определенной для всех пар точек (точечные символы, точки и контрольные точки линейных символов) в скрапе. Мера рассчитывается как $\left\vert d_a-d_b\right\vert\over d_b$, где $d_b$ -- это расстояние до деформирования, а $d_a$ -- расстояние до точек после деформирования. Максимальные и средние искажения скрапа вычисляются как максимальные или средние значения таких мер, применяемых ко всем парам точек. 

\subsubchapter XTherion. 

Если опция |-x| включена, то Therion выводит некоторые основные данные о каждой съемки (длина, амплитуда, длина с севера на юг, длина с запада на восток, количество замеров и станций). Эта информация отображается в окне XTherion'а {\it Компилятор}, в меню {\it Информация}, когда выбрана какая-либо съемка в меню {\it Структура съемки}. 

\subsubchapter Экспорт SQL. 

Экспорт SQL позволяет легко получить очень подробную информацию о нитке хода. Это текстовый файл, начинающийся с объявления таблиц (в ниже расположенном коде '?' обозначает максимальное значение, требуемое данными в колонке) 

|create table SURVEY (ID integer, PARENT_ID integer,
	NAME varchar(?), FULL_NAME varchar(?), TITLE varchar(?));
create table CENTRELINE (ID integer, SURVEY_ID integer,
	TITLE varchar(?), TOPO_DATE date, EXPLO_DATE date,
	LENGTH real, SURFACE_LENGTH real, DUPLICATE_LENGTH real);
create table PERSON (ID integer, NAME varchar(?), SURNAME varchar(?));
create table EXPLO (PERSON_ID integer, CENTRELINE_ID integer);
create table TOPO (PERSON_ID integer, CENTRELINE_ID integer);
create table STATION (ID integer, NAME varchar(?),
	SURVEY_ID integer, X real, Y real, Z real);
create table STATION_FLAG (STATION_ID integer, FLAG char(3));
create table SHOT (ID integer, FROM_ID integer, TO_ID integer,
	CENTRELINE_ID integer, LENGTH real, BEARING real, GRADIENT real,
	ADJ_LENGTH real, ADJ_BEARING real, ADJ_GRADIENT real,
	ERR_LENGTH real, ERR_BEARING real, ERR_GRADIENT real);
create table SHOT_FLAG (SHOT_ID integer, FLAG char(3));| 

за которым следуют команды SQL `insert'. Этот файл может быть загружен в любую базу данных SQL (после некоторой инициализации, зависящей от базы данных, которая может включать запуск SQL-сервера и подключение к нему, создание базы данных и подключение к ней. Хорошая идея -- начать транзакцию перед загрузкой этого файла, если база данных не запускает транзакцию автоматически). Важно настроить кодировку базы данных так, чтобы она соответствовала той, которая указана в команде экспорта базы данных Therion'а -- |export database|. 

\midinsert

\centerline{\pic{database.pdf}} \endinsert

%
Названия таблиц и столбцов говорят сами за себя; для неопределенных или несуществующих значений используется |NULL|. |FLAG| в таблице |SHOT_FLAG| принимает значения |dpl| или |srf| для дублированных замеров или замеров на поверхностности; в таблице |STATION_FLAG| -- |ent|, |con|, |fix|, |spr|, |sin|, |dol|, |dig|, |air|, |ove|, |arc| для станций с атрибутами entrance (вход), continuation (продолжение), fixed (фиксированный), spring (источник), sink (понор), doline (карстовая воронка), dig (раскоп), air-draught (ток воздуха), overhang (нависание потолка) или arch (свод), соответственно. 

Примеры простых запросов: 

\penalty-100{\it Список членов исследовательской группы с информацией о вкладе каждого из них в процесс съемки:} 

|select sum(LENGTH), sum(SURFACE_LENGTH), NAME, SURNAME
	from CENTRELINE, TOPO, PERSON
	where CENTRELINE.ID = TOPO.CENTRELINE_ID
		and PERSON.ID = PERSON_ID
	group by NAME, SURNAME order by 1 desc, 4 asc;| 

{\it Какие части пещеры были отсняты в 1998 году?} 

|select TITLE from SURVEY where ID in
	(select SURVEY_ID from CENTRELINE
	where TOPO_DATE between '1998-01-01' and '1998-12-31');| 

{\it Какова длина ходов промежутка между 1500 и 1550 м глубины?} 

|select sum(LENGTH) from SHOT, STATION S1, STATION S2
	where (S1.Z+S2.Z)/2 between 1500 and 1550 and
	SHOT.FROM_ID = S1.ID and SHOT.TO_ID = S2.ID.| 

\subsubchapter Списки -- пещеры, съемки, продолжения (перспективы). 

Использование |export continuation-list| вы получите список всех точек в нитке хода и скрапах, отмеченных \[Используя атрибут |station| для точки нитки хода и |point continuation| в скрапах.] как возможное продолжение. 

|Export cave-list| дает вам информацию в виде таблицы об обследованных пещерах (вам нужно указать флаги |entrance| в ваши данных), включая длину, глубину и местоположение входа. 

Подробная информация о каждой съемке дает команда |export survey-list|. Длина включает замеры с флагами |approximate|, но не с флагами |explored|, |duplicate| или |surface|. 

\subchapter 2D-карты. 

\subsubchapter Карты для печати. 

Карты создаются в форматах PDF и SVG, которые могут быть просмотрены или распечатаны в большом количестве программ. Обязательно снимите флаг {\it Fit page to paper (подогнать под размер страницы)} или аналогичный вариант, если вы хотите напечатать в реальном масштабе. 

В режиме атласа на каждую страницу помещается дополнительная\break информация: номер страницы, название карты и метка страницы. 

Особенно полезны номера соседних страниц в направлениях N, S, E и W, а также в верхнем и нижнем уровнях. Отображаются также гиперссылки на границе карты, если пещера продолжается на следующей странице и в соответствующих ячейках навигатора. 

Файлы PDF высоко оптимизированы -- скрапы сохраняются только один раз в документе в формах XObject и отображаются на соответствующих страницах. Therion использует самые продвинутые функции PDF, такие как прозрачность и слои. 

Созданные PDF-файлы могут быть необязательно пост-обработаны в таких приложениях, как pdf\TeX\ или Adobe Acrobat -- можно извлечь или изменить некоторые страницы, добавить комментарии или шифрование и т.д. 

\NEW{5.3}Если карта была создана с использованием данных с привязкой, то она также содержит информацию о геопривязке. Эти данные можно получить с помощью XTherion'а для создания растровых изображений с привязками (подробнее смотрите {\it XTherion/Дополнительные инструменты}). 

\subsubchapter Карты для GIS. 

Карты, созданные в форматах DXF, ESRI или KML, могут быть\break дополнительно обработаны в соответствующем программном обеспечении. Эти карты не содержат визуализированных символов карты. 

\subsubchapter Специальные карты. 

Карта в формате XVI содержит нитку хода с LRUD (и, возможно, эскизом подвергнувшимся морфингу) и может быть импортирована в XTherion,\break чтобы служить фоном для оцифровки. 

Карта в формате Survex предназначена для быстрого просмотра в Aven. 

\subchapter 3D-модели. 

Therion может экспортировать 3D-модель в различные форматы, помимо собственного формата. Они могут быть загружены в соответствующие\break программы просмотра, редактирования или трассировки для печати или дальнейшей обработки. Если формат не поддерживает отображение формы хода, то отображается только нитка хода. 

\subsubchapter Loch. 

Loch -- просмотрщик 3D-моделей, включенный в дистрибутив Therion'а. Он поддерживает, например, рендеринг с высоким разрешением и\break стерео-просмотр с помощью 3D-очков. 

\endinput

