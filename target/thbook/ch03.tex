\eject

\vbox{\hsize=93.2mm\baselineskip=12pt \rightline{\eightit Невозможно дважды войти в одну реку.} \pic{herakl.pdf} \vskip1pt \eightrm \rightline{---Heraclitus of Ephesus, {\eightmit 6}th/{\eightmit 5}th century BC} } 

\chapter Обработка данных. 

Помимо файлов данных, содержащих данные съемки, Therion использует файл конфигурации, содержащий инструкции о том, как данные должны обрабатываться. 

\subchapter Конфигурационный файл. 

Имя конфигурационного файла можно указать в качестве аргумента для Therion'а. По умолчанию Therion ищет файл с именем |thconfig| в текущем рабочем каталоге. Он обрабатывается как любой другой файл (т.е. одна команда на строку, пустые строки или строки, начинающиеся с `|#|',\break игнорируются; строки, заканчивающиеся на обратную косую черту,\break продолжаются в следующей строке.) Ниже список поддерживаемых в\break данный момент команд. 

\subsubchapter `system'. Позволяет выполнять системные команды во время компиляции\[Например, чтобы открыть или обновить внешний просмотрщик PDF.]. Обычно Therion ожидает завершения подпроцесса. Если вы хотите продолжить\break компиляцию без ожидания, используйте команду |<command> &| для Linux и |start <command>| для Windows. 

\subsubchapter `encoding'. 

Работает аналогично команде |encoding| в файлах данных -- задает кодировку символов. 

\subsubchapter `language'. \syntax

\list

* |language <xx_[YY]>| \endlist

\endsyntax

\NEW{5.3}Устанавливает язык вывода для переводимых текстов. 

\subsubchapter `cs'. 

\syntax

\list

* |cs <система координат>| \endlist

\endsyntax

\NEW{5.3}Вне команды |layout| определяет систему координат для вывода. Невозможно указать несколько систем координат для разных выходных данных\break (последнее указание |cs| используется для всех выходных файлов). 

Если |cs| не определяется в файле конфигурации, то будет использован\break первый |cs| в файлах данных. 

Внутри |layout| определяется система координат для последующих данных о местоположении (|origin|, |grid-origin|). 

\subsubchapter `sketch-warp'. 

\syntax

\list

* |sketch-warp <алгоритм>| \endlist

\endsyntax

Указывает, какой алгоритм преобразования скрапа (морфинг) использовать. Возможные алгоритмы: |line| -- по умолчанию; |plaquette| -- разработанный Marco Corvi. 

\subsubchapter `input'. 

Работает как команда |input| в файлах данных -- подключает другие файлы. 

\subsubchapter `source'. 

\description

Указывает, какие файлы съемки (данных) Therion должны читать. Здесь вы можете указать несколько файлов; по одной в каждой строке. Вы также можете указать их с помощью опции |-s| командной строки (см. ниже). 

Также можно ввести некоторые небольшие фрагменты кода непосредственно в файле конфигурации, используя многострочный синтаксис. \enddescription

\syntax

\hfill\break|source <имя файла>|\hfill\break или\hfill\break |source|\hfill\break {\qquad\it\dots команды Therion'а\dots}\hfill\break |endsource| \endsyntax

\arguments

* |<имя файла>| \endarguments

\subsubchapter `select'. 

\description

выбирает объекты (съемки и карты) для экспорта. По умолчанию\break выбираются все объекты съемки. Если карта не выбрана, то выбираются все скрапы принадлежащие выбранным съемкам. 

Если в данных нет скрапов или карт, то на карте будет отображаться нитка хода из всех съемок. 

При экспорте карт в разных проекциях вам нужно выбирать их для каждой проекции отдельно. \enddescription

\syntax

|select <объект> [ОПЦИИ]| \endsyntax

\arguments

* |<объект>| = любая съемка или карта, имеющие идентификатор ID. \endarguments

\options

* |recursive <on/off>| = действует только при выборе съемки. По умолчанию установлен в |on|, все подсъемки данной съемки рекурсивно выбираются/не выбираются. 

* |map-level <число>| = действует только при выборе карты. Определяет уровень, на котором прекращается расширение карты для экспорта в виде атласа. По умолчанию используется 0; если указано `basic', расширение выполняется до основных карт (т.е. все). {\it Примечание:} Предварительный просмотр карт отображается только в соответствии с картами в текущем |map-level|. 

* |chapter-level <число>| = действует только при выборе карты. Определяет уровень, при котором прекращается расширение главы для экспорта в виде атласа. По умолчанию используется 0; если используется `|-|' или `|.|', то для этой карты не экспортируется ни одна глава. Если опция |title-pages| в |layout| включена, то каждая глава начинается с титульной страницы. \endoptions

\subsubchapter `unselect'. 

\description

Отменяет выбор объектов для экспорта. \enddescription

\syntax

|unselect <объект> [ОПЦИИ]| \endsyntax

\arguments

Так же, как и в команде |select|. \endarguments

\options

Так же, как и в команде |select|. \endoptions

\subsubchapter `text'. 

\description

Задает перевод текста по умолчанию для вывода. \enddescription

\syntax

|text <ID языка> <therion текст> <перевод>| \endsyntax

\arguments

* |<ID языка>| = стандартный идентификатор языка ISO (например, |en| или |en_GB|). * |<therion текст>| = текст Therion'а для перевода. Список текстов и\break доступных переводов смотрите в файле |thlang/texts.txt|; \endarguments

\subsubchapter `layout'. 

\description

Задает макет для 2D-карт. Настройки, применяемые к режиму атласа,\break отмечены `A'; к режиму карт -- `M'. \enddescription

\syntax

|layout <id> [ОПЦИИ]
	copy <id исходного макета>
	cs <система координат>
	north <true/grid>
	scale <длина изображения> <реальная длина>
	base-scale <длина изображения> <реальная длина>
	units <metric/imperial>
	rotate <число>
	symbol-set <набор символов>
	symbol-assign <point/line/area/group/special> <тип символа>
		<набор символов>
	symbol-hide <point/line/area/group/special> <тип символа>
	symbol-show <point/line/area/group/special> <тип символа>
	symbol-colour <point/line/area/group/special> <тип символа> <цвет>
	min-symbol-scale <масштаб>
	fonts-setup <tinysize> <smallsize> <normalsize> <largesize> <hugesize>
	size <ширина> <высота> <единицы>
	overlap <значение> <единицы>
	page-setup <размеры> <единицы>
	page-numbers <on/off>
	exclude-pages <on/off> <список>
	title-pages <on/off>
	nav-factor <фактор>
	nav-size <x-размер> <y-размер>
	transparency <on/off>
	opacity <значение>
	surface <top/bottom/off>
	surface-opacity <значение>
	sketches <on/off>
	layers <on/off>
	grid <off/top/bottom>
	grid-origin <x> <y> <x> <единицы>
	grid-size <x> <y> <z> <единицы>
	grid-coords <off/border/all>
	origin <x> <y> <z> <единицы>
	origin-label <x-метка> <y-метка>
	own-pages <число>
	page-grid <on/off>
	legend <on/off/all>
	legend-columns <число>
	legend-width <n> <единицы>
	map-comment <текст>
	map-header <x> <y> <off/n/s/e/w/ne/nw/se/sw/center>
	map-header-bg <on/off>
	map-image <x> <y> <n/s/e/w/ne/nw/se/sw/center> <имя файла>
	statistics <explo/topo/carto/copyright all/off/number>
		<explo/topo-length on/off>
	scale-bar <длина> <единицы>
	survey-level <N/all>
	language <xx[_YY]>
	colour/color <item> <цвет>
	debug <on/all/first/second/scrap-names/station-names/off>
	doc-author <текст>
	doc-keywords <текст>
	doc-subject <текст>
	doc-title <текст>
	code <metapost/tex-map/tex-atlas>
	endcode
endlayout| \endsyntax

\arguments

|<id>| = идентификатор макета (используется в команде |export|). \endarguments

\comopt * |copy <id исходного макета>| = устанавливаются свойства макета, которые берутся из данных исходного макета. 

{\it Относящиеся к представлениям в виде карт:}\Nobreak 

* |scale <длина изображения> <реальная длина>| = устанавливает масштаб выходной карты или атласа (M, A; по умолчанию: |1 200|). * |base-scale <длина изображения> <реальная длина>| = если установлено, Therion будет масштабировать карту с коэффициентом (|scale/base-scale|). Это имеет такой же эффект, как если бы карта, распечатанная в |base-scale|, была бы масштабирована к |scale|. (M, A). * |rotate <значение>| = вращает карту (M, A; по умолчанию: |0|). * |units <metric/imperial>| = установить единицы измерения (M, A; по\break умолчанию: |metric|). * |symbol-set <набор символов>| = использование |набора символов| для всех символов карты, если они доступны. Помните, что имя набора символов чувствительно к регистру. (M, A). 

Therion использует следующие предопределенные наборы символов:\par UIS (Международный союз спелеологии)\par ASF (Австралийская спелеологическая федерация)\par AUT (Австрийская спелеологическая ассоциация)\par CCNP (Национальный парк Карлсбадских пещер)\NEW{5.4}\par NZSS (набор символов Новой Зеландии)\NEW{5.4}\par SKBB (спелеоклуб Bansk{\my \'a} Bystrica). 

* {\rightskip 0cm minus 4pt |symbol-assign <point/line/area/group/special> <тип символа> <набор|\break |символов>| = отображение определенного символа в заданном наборе\break символов. Этот опция переопределяет опцию |symbol-set|.\par} 

Если символ имеет подтип, аргумент |<тип символа>| может иметь одну из следующих форм: |тип:подтип| или просто |тип|, который присваивает новый набор символов всем подтипам данного символа. 

Следующие символы не могут использоваться с этой опцией: точечный {\it section} (который вообще не отображается) и все точечные и линейные надписи ({\it label}, {\it remark}, {\it altitude}, {\it height}, {\it passage-height}, {\it station-name}, {\it date}). Смотрите главу {\it Изменение макета/Настройка текстовых меток}, чтобы узнать, как изменить внешний вид надписей. (M, A). 

Группа (group) может быть одной из следующих: all (все), centerline (нитка хода), sections (сечения), \NEW{5.3}water (вода), speleothems (спелеотемы), passage-fills (рельеф хода), \NEW{5.4} ice (лед), sediments (отложения), equipment\break (оборудование). 

Есть два специальных символа: north-arrow (стрелка на север), scale-bar (шкала масштаба). 

* |symbol-hide <point/line/area/group/special> <тип символа>| = не\break отображать конкретный символ или группу символов. 

Вы можете использовать |group cave-centerline|, |group surface-centerline|,\break |point cave-station|, |point surface-station| и \NEW{5.4}|group text| в командах |symbol-hide| и |symbol-show|. 

Используйте |flag:<entrance/continuation/sink/spring/doline/dig>| как |<тип символа>| чтобы скрыть станции с определенными флагами (например, |symbol-hide point flag:entrance|). 

Может комбинироваться с |symbol-show|. (M, A). * |symbol-show <point/line/area/group/special> <тип символа>| = отображать определенный символ или группу символов. Может комбинироваться с |symbol-hide|. (M, A). 

* \NEW{5.3}|symbol-colo[u]r <point/line/area/group/special> <тип символа> <цвет>| = изменить цвет конкретного символа или группы символов\[Примечание: изменение цвета в настоящее время применяется к заполнению шаблона только в том случае, если (1) формат вывода PDF и (2)~\MP\ версия не ниже 1.000.]. (M, A). 

* \NEW{5.4.1}|min-symbol-scale <масштаб>| = определить минимальный |<масштаб>|, при котором точечные и линейные символы отображаются на карте.\break Например, при опции |min-symbol-scale M| никакие точечные или линейные сим\-волы при масштабе |S| и |XS| не будут показаны на карте. |<Масштаб>| имеет тот же формат, что и |масштаб| для точечных и линейных символов. 

* \NEW{5.4.1}|fonts-setup <tinysize> <smallsize> <normalsize> <largesize> <hugesize>| = указать размер текста в точечных символах. |<normalsize>| применяется к точечному символу `подпись', |<smallsize>| к `заметке' и всем другим точечным текстовым символам. Каждый из этих размеров может\break применяться к строковому текстовому символу в соответствии с ее опцией |-size|. 

По умолчанию: |8 10 12 16 24| для шкал до 1:100; |7 8 10 14 20| для шкал до 1:200; |6 7 8 10 14| для шкал до 1:500 и |5 6 7 8 10| для шкал менее 1:500. 

{\it Относящиеся к макету страницы:}\Nobreak 

* |size <ширина> <высота> <единицы>| = задает размер карты в режиме атласа. Если не указано, то размер будет рассчитан по |page-setup| и |overlap|. Применяется в режиме карты, если |page-grid| установлен в |on| (M, A; по умолчанию: |18 22,2 см|). * |overlap <значение> <единицы>| = установить размер перекрытия в единицах в режиме атласа или поля карты в режиме карты (M, A; по умолчанию: |1 см|). * |page-setup <размеры> <единицы>| = установить размеры страницы в таком порядке: ширина бумаги, высота бумаги, ширина страницы, высота страницы, левое поле и верхнее поле. Если не указано, то размеры будут вычислены из |size| и |overlap| (A; по умолчанию: |21 29,7 20 28,7 0,5 0,5 см|). * |page-numbers <on/off>| = включить/выключить нумерацию страниц (A; по умолчанию: |on|). * |exclude-pages <on/off> <список>| = исключить указанные страницы из атласа. Список может содержать номера страниц, разделенные запятой или тире (для интервалов), например, |2,4-7,9,23| означает, что страницы 2, 4, 5, 6, 7, 9 и 23 должны не выводиться. Только страницы карты должны подсчитываться. (Установите |own-pages 0| и |title-pages off| чтобы получить корректные номера страниц после исключения). Изменения опций |own-pages| или |title-pages| не влияют на исключение страниц. (A). * |title-pages <on/off>| = включение/выключение титульных страниц перед каждой главой атласа (A; по умолчанию: |off|). * |nav-factor <фактор>| = установить коэффициент масштабирования навига\-тора атласа (A; по умолчанию: |30|). * |nav-size <x-размер> <y-размер>| = установить количество страниц атласа в обоих направлениях навигатора (A; по умолчанию: |2 2|). * |transparency <on/off>| = установить прозрачность для ходов (отображаются только видимые ходы) (M, A; по умолчанию: |on|). * |opacity <значение> | = установить значение непрозрачности (используется, если |transparent| установлен в |on|). Диапазон значений 0-100. (M, A; по умолчанию: |70|). * |surface-opacity <значение>| = установить прозрачность растровой поверх\-ности (используется, если |transparent| установлен в |on|). Диапазон значений 0-100. (M, A; по умолчанию: |70|). * |surface <top/bottom/off>| = установить положение растрового изображения выше/ниже карты. (M, A; по умолчанию: |off|). * |sketches <on/off>| = отображать/скрыть растровые изображения с эскизом подвергшимся морфингу. (M, A; по умолчанию: |off|). * |layers <on/off>| = включение/отключение слоев PDF 1.5 (M, A; по умолча\-нию: |on|). * |grid <off/bottom/top>| = отображать/скрыть сетку (опционально могут\break также отображаться значения координат) (M, A; по умолчанию: |off|). * |cs <система координат>| = система координат для |origin| и |grid-origin|. * |north <true/grid>| = указать ориентацию карты по умолчанию. По умолча\-нию используется истинный (астрономический) север. Он игнорируется при использовании с локальной системой координат. * |grid-origin <x> <y> <x> <единицы> | = заданные координаты начала сетки (M, A). * |grid-size <x> <y> <z> <единицы>| = задать размер сетки в реальных едини\-цах (M, A, по умолчанию равен размеру шкалы). * |grid-coords <off/border/all>| = указать, где маркировать сетку координа\-тами. (M, A; по умолчанию: |off|). * |origin <x> <y> <z> <единицы>| = установить начало страниц атласа (M, A). * |origin-label <x-метка> <y-метка>| = set label for atlas page which has the lower left corner at the given origin coordinates. Может быть либо числом, либо символом. (M, A; по умолчанию: |0 0|). * |own-pages <число> | = установить количество собственных страниц, добав\-ленных до первой страницы автоматически созданных страниц в режиме атласа (в настоящее время требуется для правильной нумерации страниц) (A; по умолчанию: |0|). * |page-grid <on/off> | = show pages key plan (M; по умолчанию: |off|). 

{\it Относящиеся к легенде карты:}\Nobreak 

|map-header <x> <y> <off/n/s/e/w/ne/nw/se/sw/center>| = напечатать заго\-ловок карты в месте, указанном координатами |<x> <y>|. Предопределен\-ный заголовок карты содержит некоторую базовую информацию о пещере: имя, масштаб, направление на север, список съемщиков и т.д. Он пол\-ностью настраивается (подробнее смотрите главу {\itИзменение макета}). |<x>| -- на восток (слева направо на странице). |<y>| -- на север (вверх/вниз страницы). Диапазоны для |<x>| и |<y>| -- 0-100. Нижний левый угол карты равен |0 0|, верхний правый угол |100 100|. Заголовок выравнивается с указанным углом или сбоку от этой точки привязки. (M; по умолчанию: |0 100 nw|). * |map-header-bg <on/off>| = когда включено, фон заголовка карты заполня\-ется цветом фона (например, для скрытия сетки). (M; по умолчанию: |off|). * |map-image <x> <y> <n/s/e/w/ne/nw/se/sw/center> <имя файла>| = вклю\-чить изображение, указанное в |<имя файла>| на карту в месте, указанном |<x> <y>|. Для координат и деталей выравнивания смотрите спецификацию на |map-header|. * |legend-width <n> <единицы>| = ширина легенды (M, A; по умолчанию: |14 см|). * |legend <on/off/all>| = отобразить список используемых символов карты в заголовке карты. Если установлено значение |all|, то отображаются все символы из текущего набора символов. (M, A; по умолчанию: |off|). * |colo[u]r-legend <on/off>| = показать/скрыть легенду цветов |map-fg|, когда |map-fg| установлен по высоте, скрапу или карте (M, A). * |legend-columns <число>| = указывает количество столбцов легенды (M, A; по умолчанию: |2|). * |map-comment <текст> | = необязательный комментарий, отображаемый в заголовке карты (M). * |statistics <explo/topo/carto/copyright all/off/number>| или * |statistics <explo/topo-length on/hide/off>| = отобразить некоторые основные статистические данные; если установлено значение |off|, то члены команды сортируются \NEW{5.4} в алфавитном порядке; в противном случае в зависимости от их вклада в работу (M, A; по умолчанию: |off|). * |scale-bar <длина> <единицы> | = установить длину шкалы (M, A). * |language <xx[_YY]>| = установить язык вывода. Доступные языки перечис\-лены на странице авторских прав. Смотрите {\it Приложение}, если вы хотите добавить или настроить переводы. (M, A). * |colo[u]r <item> <цвет>| = настроить цвет для специальных элементов карты (|map-fg|, |map-bg|, |preview-above|, |preview-below|, |label|). Цветовой диапазон 0-100 для оттенков серого, [0-100 0-100 0-100] для цветов в пространстве RGB. 

Для |map-fg| вы можете использовать |altitude|, |scrap| или |map| как цвета. В этом случае карта окрашена в соответствии с высотой, скрапом или картой. 

Для |map-bg| вы можете использовать |transparent| чтобы полностью исклю\-чить фон страницы. 

Для подписей вы можете включать/выключать цвет |on/off|. Если |on|, то подписи окрашиваются с использованием цвета связанного скрапа. 

* |debug <on/all/first/second/scrap-names/station-names/off>| = рисовать скрап на разных этапах преобразования в разных цветах, чтобы увидеть, как Therion искажает данные карты. Смотрите описание |scrap| для подробнос\-тей. Точечные символы, расположение которых больше всего изменились во время преобразования, отображаются оранжевым цветом. Если |scrap-names| указано, имена скрапов отображаются для каждого скрапа, |station-names| отображает имя каждой станции съемки. * |survey-level <N/all>| = |N| -- количество уровней съемки, отображаемых рядом с именем станции (M, A; по умолчанию: |0|). 

{\it Относящиеся к PDF:}\Nobreak 

* |doc-author <текст>| = установить автора документа (M, A). * |doc-keywords <текст>| = установить ключевые слова документа (M, A). * |doc-subject <текст>| = задать тему документа (M, A). * |doc-title <текст> | = установить название документа (M, A). 

{\it Настройка:}\Nobreak 

* |code <metapost/tex-map/tex-atlas>| = Добавить/переопределить макросы\break \TeX\ и \MP. Это позволяет пользователю настраивать различные элементы (например, пользовательские символы, макет карты и атласа в одном месте и т.д.). Для подробностей смотрите главу {\it Изменение макета}. * |endcode| = должен заканчивать разделы TeX\ и \MP.\endcomopt

\midinsert

%  \ifx\pdfoutput\undefined\else
%    \pdfximage {pic/page.pdf}%
%  \fi
%  \vbox to 482bp{\centerline{\hbox to 400bp{%
%    \ifx\pdfoutput\undefined
%      \epsfbox{mp/page.1}%
%    \else
%      \rlap{\pdfrefximage\pdflastximage}%
%      \convertMPtoPDF{mp/page.1}{1}{1}
%    \fi
%    \hss}}\vss
%  }
\vbox to 482bp{\centerline{\hbox to 400bp{ \rlap{\pic{page.pdf}} \MPpic{page.1} \hss}}\vss } \endinsert

%%
\subsubchapter `setup3d'. 

\syntax

\list

* |setup3d <значение>| \endlist

\endsyntax

\NEW{5.3}Temporary hack to set sampling distance in meters when generating piecewise linear 3d model from passage walls made of B{\my\'e}zier curves. 

\subsubchapter `sketch-colors'. 

\syntax

\list

* |sketch-colors <number-of-colors>| \endlist

\endsyntax

\NEW{5.4} Этот параметр можно использовать для уменьшения размера растровых изо\-бражений эскиза на картах. 

\subsubchapter `export'. 

\description

Экспортирует выбранные съемки или карты. \enddescription

\syntax

\list

* |export <тип> [ОПЦИИ]| \endlist

\endsyntax

\arguments

* |<тип>| = поддерживаются следующие типы экспорта: 

|model| = 3D-модель пещеры; 

|map| = одностраничная 2D-карта; 

|atlas| = 2D-атлас на нескольких страницах; 

|cave-list| = сводная таблица пещер; 

|survey-list| = сводная таблица съемок; 

|continuation-list| = список возможных продолжений (перспектив); 

|database| = база данных SQL с ниткой хода. \endarguments

\penalty0 

\options

{\it общие:}\Nobreak * |encoding/enc <кодировка>| = установить кодировку вывода. * |output/o <файл>| = установить выходной файл. Если имя файла не задано, префикс ``|cave.|'' используется с расширением, соответствующим выход\-ному формату. 

Если задано имя выходного файла и не указан выходной формат, формат определяется из расширения имени файла. 

{\it model (модель):}\Nobreak 

* |format/fmt <формат>| = установить формат вывода модели. В настоящее время поддерживаются следующие форматы вывода: |loch| (собственный формат, по умолчанию), |compass| (plt файл), |survex| (3d файл), |dxf|, |esri| (3d shapefiles), |vrml|, |3dmf| и |kml| (Google Earth). * |enable <walls/[cave/surface-]centerline/splay-shots/surface/all>| и * |disable <walls/[cave/surface-]centerline/splay-shots/surface/all>| = выбирает, какие функции экспортировать, если формат поддерживает его. Поверх\-ность в настоящее время экспортируется только в формате |therion|. * |wall-source <maps/centerline/all>| = установить исходные данные для моде\-лирования стен хода. 

{\it map/atlas (карты/атлас):}\Nobreak 

* |format/fmt <формат>| = установить формат карты. В данный момент под\-держиваются форматы |pdf|, |svg|, |xhtml|\[SVG, встроенный в XHTML-файл, который также содержит легенду.], |survex|, |dxf|, |esri|\[ESRI shapefiles. Несколько файлов записываются в каталог с указанным именем файла.], |kml| (Google Earth), |xvi|\[Векторное изображение Xtherion'а. Изображения XVI могут использоваться для рисова\-ния карт в масштабе. |Scale| (принято разрешение изображения в 100 DPI) и |grid-size| макета используются в экспорте.] и \NEW{5.3}|bbox|\[Текстовый файл, содержащий географические координаты нижних и верхних правых углов области карты.] для карты; |pdf| для атласа. * |projection <id>| = уникальный идентификатор, который задает тип проек\-ции карты. (Для деталей смотрите команду |scrap|). 

Если карта не определена, экспортируются все скрапы в данной проекции. 

Если нет скрапов с указанной проекцией, Therion отобразит нитку хода из выбранных съемок. * |layout <id>| = использовать предопределенный макет карты или атласа. * |layout-xxx| = где |xxx| означает другие опции макета. Используя это, вы можете изменить некоторые свойства макета непосредственно в команде |export|. * |encoding/enc <кодировка>| = установить кодировку вывода. 

{\it общее для list (списков):}\Nobreak 

* |format/fmt <формат>| = установить формат списка возможных продолже\-ний (перспектив). В настоящее время поддерживаются следующие фор\-маты вывода: |html| (по умолчанию), |txt|, \NEW{5.4}|kml|\[Для списка пещер и списка продолжений (перспектив).] и |dbf|. 

{\it continuation-list (список перспектив):}\Nobreak 

* |attributes <(on)/off>| = указывает, следует ли экспортировать определенные пользователем атрибуты в таблице списка продолжений (перспектив). * \NEW{5.3}|filter <(on)/off>| = указывает, следует ли продолжения (перспективы) без комментариев/текста фильтровать. 

{\it cave-list (список пещер):}\Nobreak 

* |location <on/(off)>| = указать, следует ли экспортировать координаты вхо\-дов пещеры в таблицу. * \NEW{5.3}|surveys (on)/off| = экспортирует необработанный список пещер при уста\-новке |off|. Иначе отображается структура съемки со статистикой. 

{\it database (база данных):}\Nobreak 

* |format/fmt <формат>| = в настоящее время поддерживаются форматы |sql| и |csv|. * |encoding/enc <кодировка>| = установить кодировку вывода. \endoptions

{\it Форматы файлов:} \nobreak\medskip \bgroup

\leavevmode\kern1em\vbox{\advance\hsize-1em\halign{#\hfil\quad&#\hfil\cr {\it тип экспорта}&{\it поддерживаемые форматы}\cr\noalign{\smallskip\hrule\smallskip} model (модель) &loch, dxf, esri, compass, survex, vrml, 3dmf, kml\cr map (карта) &pdf, svg, xhtml, dxf, esri, survex, xvi, kml, \NEW{5.3}bbox\cr atlas (атлас) &pdf\cr database (база данных) &sql, \NEW{5.4}csv\cr lists (списки) &html, txt, kml, dbf\cr}}\egroup 

\subchapter Запуск Therion'а. 

Теперь, после освоения данных и файлов конфигурации, мы готовы запус\-тить Therion. Обычно это делается из командной строки в каталоге данных путем ввода 

|therion| 

Полный синтаксис 

|therion [-q]
		  [-L]
		  [-l <файл журнала>]
		  [-s <исходный файл>] [-p <путь поиска>]
		  [-b/--bezier]
		  [-d]
		  [-x]
		  [--use-extern-libs]
		  [<конфигурационный файл>]| 

или 

|therion [-h/--help]
		  [-v/--version]
		  [--print-encodings]
		  [--print-environment]
		  [--print-init-file]
		  [--print-library-src]
		  [--print-symbols]
		  [--print-tex-encodings]
		  [--print-xtherion-src]| 

\penalty-200 \arguments

|<конфигурационный файл>| = Therion принимает только один необязатель\-ный аргумент: имя конфигурационного файла. Если имя не указано, то ищется файл |thconfig| в текущем каталоге. Если не существует файла |thconfig| (например, текущий каталог не является каталогом данных), тогда Therion выдаст сообщение об ошибке. \endarguments

\options

* |-d| = включить режим отладки. Текущая реализация создает временный каталог с именем |thTMPDIR| (в вашем временном системном каталоге) и не удаляет временные файлы. 

%* |-g| =
%  Using this option you can generate a new configuration file.
%  If |cfg-file| is not specified therion will use the |thconfig|
%  file. If the destination file exists, it'll be overwritten.
%  Generate a new configuration file. This will be the given 
%  |<cfg-file>| if specified, or |thconfig| in the current directory if not. 
%  If the file already exists, it will be overwritten.
%        
* |-h, --help| = показать краткую справку. 

%* |-i| =
%        Ignore comments when writing |-g| or |-u| configuration file.
%
* |-L| = не создавайте файл журнала. Обычно Therion записывает все сообще\-ния в файл therion.log в текущем каталоге. 

* |-l <файл журнала>| = изменить имя файла журнала. 

* |-p <путь поиска>| = эта опция используется для установки пути поиска (или списка путей разделенных двоеточиями), который использует Therion для поиска его исходных файлов (если он не находит их в рабочем каталоге). 

* |-q| = запустить Therion в тихом режиме. Он будет печатать только предуп\-реждения и сообщения об ошибках в STDERR. 

* |--print-encodings| = выводит список всех поддерживаемых входных кодиро\-вок. 

* |--print-tex-encodings| = выводит список всех поддерживаемых кодировок для вывода в PDF. 

* |--print-init-file| = выводит файл инициализации по умолчанию. Более под\-робную информацию смотрите в разделе {\it Инициализация} в {\it Приложении}. 

* |--print-environment| = выводит настройки среды для Therion'а. 

* |--print-symbols| = выводит список всех символов карты, поддерживаемых Therion'ом в файл |symbols.xhtml|. 

* |-s <исходный файл>| = установить имя исходного файла. 

%* |-u| =
%        Upgrade the configuration file.
%
* |--use-extern-libs| = не копирует макросы \TeX\ и \MP\ в рабочий каталог. \TeX\ и \MP\  должны искать их самостоятельно. Используйте с осто\-рожностью. 

* |-v, --version| = отображать информацию о версии. 

* |-x| = создает файл `.xtherion.dat' с дополнительной информацией о XTherion'е. \endoptions

\subsubchapter XTherion -- компилятор. 

XTherion упрощает запуск Therion'а, особенно в системах без вывода команд\-ной строки. Окно компилятора -- это окно по умолчанию в XTherion'е. Для запуска Therion'а достаточно открыть конфигурационный файл и нажать кнопку `F9' или `Компилировать'. 

XTherion отображает сообщения Therion'а в нижней части экрана. Каждое сообщение об ошибке подсвечивается и является гиперссылкой на исходный файл, где произошла ошибка. 

После первого запуска активируются дополнительные меню {\it Структура\break съемки} и {\it Структура карты}. Пользователь может с комфортом выбрать съемку или карту для экспорта, дважды щелкнув некоторые элементы в дереве структуры. Простой щелчок в дереве {\it Структура съемки} отображает основную информацию о съемке в меню {\it Информация}. 

\endinput

