\eject

\vbox{\hsize=93.2mm\baselineskip=12pt \rightline{\eightit Невозможно дважды войти в одну реку.} \pic{herakl.pdf} \vskip1pt \eightrm \rightline{---Heraclitus of Ephesus, {\eightmit 6}th/{\eightmit 5}th century BC} } 

\chapter Обработка данных. 

Помимо файлов данных, содержащих данные съемки, Therion использует файл конфигурации, содержащий инструкции о том, как данные должны обрабатываться. 

\subchapter Конфигурационный файл. 

Имя конфигурационного файла можно указать в качестве аргумента для Therion'а. По умолчанию Therion ищет файл с именем |thconfig| в текущем рабочем каталоге. Он обрабатывается как любой другой файл (т.е. одна команда на строку, пустые строки или строки, начинающиеся с `|#|', игнори\-руются; строки, заканчивающиеся на обратную косую черту, продолжаются в следующей строке.) Ниже список поддерживаемых в данный момент команд.
 

\subsubchapter `system'. Позволяет выполнять системные команды во время компиляции\[Например, чтобы открыть или обновить внешний просмоторщик PDF.]. Обычно Therion ожидает завершения подпроцесса. Если вы хотите продолжить ком\-пиляцию без ожидания, используйте команду |<command> &| для Linux и |start <command>| для Windows. 

\subsubchapter `encoding'. 

Работает аналогично команде |encoding| в файлах данных -- задает кодировку символов. 

\subsubchapter `language'. \syntax

\list

* |language <xx_[YY]>| \endlist

\endsyntax

\NEW{5.3}Устанавливает язык вывода для переводимых текстов. 

\subsubchapter `cs'. 

\syntax

\list

* |cs <система координат>| \endlist

\endsyntax

\NEW{5.3}Вне команды |layout| определяет систему координат для вывода. Невозможно указать несколько систем координат для разных выходных данных (послед\-нее указание |cs| используется для всех выходных файлов). 

Если |cs| не определяется в файле конфигурации, то будет использован первый |cs| в файлах данных. 

Внутри |layout| определяется система координат для последующих данных о местоположении (|origin|, |grid-origin|). 

\subsubchapter `sketch-warp'. 

\syntax

\list

* |sketch-warp <алгоритм>| \endlist

\endsyntax

Указывает, какой алгоритм преобразования скрапа (морфинг) использовать. Возможные алгоритмы: |line| -- по умолчанию; |plaquette| -- разработанный Marco Corvi. 

\subsubchapter `input'. 

Работает как команда |input| в файлах данных -- подключает другие файлы. 

\subsubchapter `source'. 

\description

Указывает, какие файлы съемки (данных) Therion должны читать. Здесь вы можете указать несколько файлов; по одной в каждой строке. Вы также можете указать их с помощью опции |-s| командной строки (см. ниже). 

Также можно ввести некоторые небольшие фрагменты кода непосредственно в файле конфигурации, используя многострочный синтаксис. \enddescription

\syntax

\hfill\break|source <имя файла>|\hfill\break или\hfill\break |source|\hfill\break {\qquad\it\dots команды Therion'а\dots}\hfill\break |endsource| \endsyntax

\arguments

* |<имя файла>| \endarguments

\subsubchapter `select'. 

\description

выбирает объекты (съемки и карты) для экспорта. По умолчанию выбира\-ются все объекты съемки. Если карта не выбрана, то выбираются все скрапы принадлежащие выбранным съемкам. 

Если в данных нет скрапов или карт, то на карте будет отображаться нитка хода из всех съемок. 

При экспорте карт в разных проекциях вам нужно выбирать их для каждой проекции отдельно. \enddescription

\syntax

|select <объект> [ОПЦИИ]| \endsyntax

\arguments

* |<объект>| = любая съемка или карта, имеющие идентификатор ID. \endarguments

\options

* |recursive <on/off>| = действует только при выборе съемки. По умолчанию установлен в |on|, все подсъемки данной съемки рекурсивно выбираются/не выбираются. 

* |map-level <число>| = действует только при выборе карты. Определяет уровень, на котором прекращается расширение карты для экспорта в виде атласа. По умолчанию используется 0; если указано `basic', расширение выполня\-ется до основных карт (т.е. все). {\it Примечание:} Предварительный просмотр карт отображается только в соответствии с картами в текущем |map-level|. 

* |chapter-level <число>| = действует только при выборе карты. Определяет уровень, при котором прекращается расширение главы для экспорта в виде атласа. По умолчанию используется 0; если используется `|-|' или `|.|', то для этой карты не экспортируется ни одна глава. Если опция |title-pages| в |layout| включена, то каждая глава начинается с титульной страницы. \endoptions

\subsubchapter `unselect'. 

\description

Отменяет выбор объектов для экспорта. \enddescription

\syntax

|unselect <объект> [ОПЦИИ]| \endsyntax

\arguments

Так же, как и в команде |select|. \endarguments

\options

Так же, как и в команде |select|. \endoptions

\subsubchapter `text'. 

\description

Задает перевод текста по умолчанию для вывода. \enddescription

\syntax

|text <ID языка> <therion текст> <перевод>| \endsyntax

\arguments

* |<ID языка>| = стандартный идентификатор языка ISO (например, |en| или |en_GB|). * |<therion текст>| = текст Therion'а для перевода. Список текстов и доступных переводов смотрите в файле |thlang/texts.txt|. \endarguments

\subsubchapter `layout'. 

\description

Задает макет для 2D-карт. Настройки, применяемые к режиму атласа, отме\-чены `A'; к режиму карт -- `M'. \enddescription

\syntax

|layout <id> [ОПЦИИ]
	copy <id исходного макета>
	cs <система координат>
	north <true/grid>
	scale <длина изображения> <реальная длина>
	base-scale <длина изображения> <реальная длина>
	units <metric/imperial>
	rotate <число>
	symbol-set <набор символов>
	symbol-assign <point/line/area/group/special> <тип символа>
		<набор символов>
	symbol-hide <point/line/area/group/special> <тип символа>
	symbol-show <point/line/area/group/special> <тип символа>
	symbol-colour <point/line/area/group/special> <тип символа> <цвет>
	min-symbol-scale <масштаб>
	fonts-setup <tinysize> <smallsize> <normalsize> <largesize> <hugesize>
	size <ширина> <высота> <единицы>
	overlap <значение> <единицы>
	page-setup <размеры> <единицы>
	page-numbers <on/off>
	exclude-pages <on/off> <список>
	title-pages <on/off>
	nav-factor <фактор>
	nav-size <x-размер> <y-размер>
	transparency <on/off>
	opacity <значение>
	surface <top/bottom/off>
	surface-opacity <значение>
	sketches <on/off>
	layers <on/off>
	grid <off/top/bottom>
	grid-origin <x> <y> <x> <единицы>
	grid-size <x> <y> <z> <единицы>
	grid-coords <off/border/all>
	origin <x> <y> <z> <единицы>
	origin-label <x-метка> <y-метка>
	own-pages <число>
	page-grid <on/off>
	legend <on/off/all>
	legend-columns <число>
	legend-width <n> <единицы>
	map-comment <текст>
	map-header <x> <y> <off/n/s/e/w/ne/nw/se/sw/center>
	map-header-bg <on/off>
	map-image <x> <y> <n/s/e/w/ne/nw/se/sw/center> <имя файла>
	statistics <explo/topo/carto/copyright all/off/number>
		<explo/topo-length on/off>
	scale-bar <длина> <единицы>
	survey-level <N/all>
	language <xx[_YY]>
	colour/color <item> <цвет>
	debug <on/all/first/second/scrap-names/station-names/off>
	doc-author <текст>
	doc-keywords <текст>
	doc-subject <текст>
	doc-title <текст>
	code <metapost/tex-map/tex-atlas>
	endcode
endlayout| \endsyntax

\arguments

|<id>| = идентификатор макета (используется в команде |export|). \endarguments

\comopt * |copy <id исходного макета>| = устанавливаются свойства макета, которые бе\-рутся из данных исходного макета. 

{\it Относящиеся к представлениям в виде карт:}\Nobreak 

* |scale <длина изображения> <реальная длина>| = устанавливает масштаб выходной карты или атласа (M, A; по умолчанию: |1 200|). * |base-scale <длина изображения> <реальная длина>| = если установлено, Therion будет масштабировать карту с коэффициентом (|scale/base-scale|). Это имеет такой же эффект, как если бы карта, распечатанная в |base-scale|, была бы масштабирована к |scale|. (M, A). * |rotate <значение>| = вращает карту (M, A; по умолчанию: |0|). * |units <metric/imperial>| = установить единицы измерения (M, A; по умолча\-нию: |metric|). * |symbol-set <набор символов>| = использование |набора символов| для всех символов карты, если они доступны. Помните, что имя набора символов чувстви\-тельно к регистру. (M, A). 

Therion использует следующие предопределенные наборы символов:\par UIS (Международный союз спелеологии)\par ASF (Австралийская спелеологическая федерация)\par AUT (Австрийская спелеологическая ассоциация)\par CCNP (Национальный парк Карлсбадских пещер)\NEW{5.4}\par NZSS (набор символов Новой Зеландии)\NEW{5.4}\par SKBB (спелеоклуб Bansk{\my \'a} Bystrica). 

* {\rightskip 0cm minus 4pt |symbol-assign <point/line/area/group/special> <тип символа> <набор|\break |символов>| = отобра\-жение определенного символа в заданном наборе сим\-волов. Этот опция переопределяет опцию |symbol-set|.\par} 

Если символ имеет подтип, аргумент |<тип символа>| может иметь одну из следующих форм: |тип:подтип| или просто |тип|, который присваивает новый набор символов всем подтипам данного символа. 

Следующие символы не могут использоваться с этой опцией: точечный {\it section} (который вообще не отображается) и все точечные и линейные надписи ({\it label}, {\it remark}, {\it altitude}, {\it height}, {\it passage-height}, {\it station-name}, {\it date}). Смотрите главу {\it Изменение макета/Настройка текстовых меток}, чтобы узнать, как изменить внешний вид надписей. (M, A). 

Группа (group) может быть одной из следующих: all (все), centerline (нитка хода), sections (сечения), \NEW{5.3}water (вода), speleothems (спелеотемы), passage-fills (рельеф хода), \NEW{5.4} ice (лед), sediments (отложения), equipment (оборудова\-ние). 

Есть два специальных символа: north-arrow (стрелка на север), scale-bar (шкала масштаба). 

* |symbol-hide <point/line/area/group/special> <тип символа>| = не отобра\-жать конкретный символ или группу символов. 

Вы можете использовать |group cave-centerline|, |group surface-centerline|,\break |point cave-station|, |point surface-station| и \NEW{5.4}|group text| в командах |symbol-hide| и |symbol-show|. 

Используйте |flag:<entrance/continuation/sink/spring/doline/dig>| как |<тип символа>| чтобы скрыть станции с определенными флагами (например, |symbol-hide point flag:entrance|). 

Может комбинироваться с |symbol-show|. (M, A). * |symbol-show <point/line/area/group/special> <тип символа>| = отображать определен\-ный символ или группу символов. Может комбинироваться с |symbol-hide|. (M, A). 

* \NEW{5.3}|symbol-colo[u]r <point/line/area/group/special> <тип символа> <цвет>| = изменить цвет конкретного символа или группы символов\[Примечание: изменение цвета в настоящее время применяется к заполнению шаблона только в том случае, если (1) формат вывода PDF и (2)~\MP\ версия не ниже 1.000.]. (M, A). 

* \NEW{5.4.1}|min-symbol-scale <масштаб>| = определить минимальный |<масштаб>|, при кото\-ром точечные и линейные символы отображаются на карте. Напри\-мер, при опции |min-symbol-scale M| никакие точечные или линейные сим\-волы при масштабе |S| и |XS| не будут показаны на карте. |<Масштаб>| имеет тот же формат, что и |масштаб| для точечных и линейных символов. 

* \NEW{5.4.1}|fonts-setup <tinysize> <smallsize> <normalsize> <largesize> <hugesize>| = указать размер текста в точечных символах. |<normalsize>| применяется к точечному символу `подпись', |<smallsize>| к `заметке' и всем другим точечным текстовым символам. Каждый из этих размеров может приме\-няться к строковому текстовому символу в соответствии с ее опцией |-size|. 

По умолчанию: |8 10 12 16 24| для шкал до 1:100; |7 8 10 14 20| для шкал до 1:200; |6 7 8 10 14| для шкал до 1:500 и |5 6 7 8 10| для шкал менее 1:500. 

{\it Относящиеся к макету страницы:}\Nobreak 

* |size <ширина> <высота> <единицы>| = задает размер карты в режиме атласа. Если не указано, то размер будет рассчитан по |page-setup| и |overlap|. Применяется в режиме карты, если |page-grid| установлен в |on| (M, A; по умолчанию: |18 22,2 см|). * |overlap <значение> <единицы>| = установить размер перекрытия в едини\-цах в режиме атласа или поля карты в режиме карты (M, A; по умолчанию: |1 см|). * |page-setup <размеры> <единицы>| = установить размеры страницы в таком порядке: ширина бумаги, высота бумаги, ширина страницы, высота стра\-ницы, левое поле и верхнее поле. Если не указано, то размеры будут вычислены из |size| и |overlap| (A; по умолчанию: |21 29,7 20 28,7 0,5 0,5 см|). * |page-numbers <on/off>| = включить/выключить нумерацию страниц (A; по умолчанию: |on|). * |exclude-pages <on/off> <список>| = исключить указанные страницы из ат\-ласа. Список может содержать номера страниц, разделенные запятой или тире (для интервалов), например, |2,4-7,9,23| означает, что страницы 2, 4, 5, 6, 7, 9 и 23 должны не выводиться. Только страницы карты должны подсчитываться. (Установите |own-pages 0| и |title-pages off| чтобы получить корректные номера страниц после исключения). Изменения опций |own-pages| или |title-pages| не влияют на исключение страниц. (A). * |title-pages <on/off>| = включение/выключение титульных страниц перед каждой главой атласа (A; по умолчанию: |off|). * |nav-factor <фактор>| = установить коэффициент масштабирования навига\-тора атласа (A; по умолчанию: |30|). * |nav-size <x-размер> <y-размер>| = установить количество страниц атласа в обоих направлениях навигатора (A; по умолчанию: |2 2|). * |transparency <on/off>| = установить прозрачность для ходов (отображаются только видимые ходы) (M, A; по умолчанию: |on|). * |opacity <значение> | = установить значение непрозрачности (используется, если |transparent| установлен в |on|). Диапазон значений 0-100. (M, A; по умолчанию: |70|). * |surface-opacity <значение>| = установить прозрачность растровой поверх\-ности (используется, если |transparent| установлен в |on|). Диапазон значений 0-100. (M, A; по умолчанию: |70|). * |surface <top/bottom/off>| = установить положение растрового изображения выше/ниже карты. (M, A; по умолчанию: |off|). * |sketches <on/off>| = отображать/скрыть растровые изображения с эскизом подвергшимся морфингу. (M, A; по умолчанию: |off|). * |layers <on/off>| = включение/отключение слоев PDF 1.5 (M, A; по умолча\-нию: |on|). * |grid <off/bottom/top>| = отображать/скрыть сетку (опционально могут\break также отображаться значения координат) (M, A; по умолчанию: |off|). * |cs <система координат>| = система координат для |origin| и |grid-origin|. * |north <true/grid>| = указать ориентацию карты по умолчанию. По умолча\-нию используется истинный (астрономический) север. Он игнорируется при использовании с локальной системой координат. * |grid-origin <x> <y> <x> <единицы> | = заданные координаты начала сетки (M, A). * |grid-size <x> <y> <z> <единицы>| = задать размер сетки в реальных едини\-цах (M, A, по умолчанию равен размеру шкалы). * |grid-coords <off/border/all>| = указать, где маркировать сетку координа\-тами. (M, A; по умолчанию: |off|). * |origin <x> <y> <z> <единицы>| = установить начало страниц атласа (M, A). * |origin-label <x-метка> <y-метка>| = set label for atlas page which has the lower left corner at the given origin coordinates. Может быть либо числом, либо символом. (M, A; по умолчанию: |0 0|). * |own-pages <число> | = установить количество собственных страниц, добав\-ленных до первой страницы автоматически созданных страниц в режиме атласа (в настоящее время требуется для правильной нумерации страниц) (A; по умолчанию: |0|). * |page-grid <on/off> | = show pages key plan (M; по умолчанию: |off|). 

{\it Относящиеся к легенде карты:}\Nobreak 

|map-header <x> <y> <off/n/s/e/w/ne/nw/se/sw/center>| = напечатать заго\-ловок карты в месте, указанном координатами |<x> <y>|. Предопределен\-ный заголовок карты содержит некоторую базовую информацию о пещере: имя, масштаб, направление на север, список съемщиков и т.д. Он пол\-ностью настраивается (подробнее смотрите главу {\itИзменение макета}). |<x>| -- на восток (слева направо на странице). |<y>| -- на север (вверх/вниз страницы). Диапазоны для |<x>| и |<y>| -- 0-100. Нижний левый угол карты равен |0 0|, верхний правый угол |100 100|. Заголовок выравнивается с указанным углом или сбоку от этой точки привязки. (M; по умолчанию: |0 100 nw|). * |map-header-bg <on/off>| = когда включено, фон заголовка карты заполня\-ется цветом фона (например, для скрытия сетки). (M; по умолчанию: |off|). * |map-image <x> <y> <n/s/e/w/ne/nw/se/sw/center> <имя файла>| = вклю\-чить изображение, указанное в |<имя файла>| на карту в месте, указанном |<x> <y>|. Для координат и деталей выравнивания смотрите спецификацию на |map-header|. * |legend-width <n> <единицы>| = ширина легенды (M, A; по умолчанию: |14 см|). * |legend <on/off/all>| = отобразить список используемых символов карты в заголовке карты. Если установлено значение |all|, то отображаются все символы из текущего набора символов. (M, A; по умолчанию: |off|). * |colo[u]r-legend <on/off>| = показать/скрыть легенду цветов |map-fg|, когда |map-fg| установлен по высоте, скрапу или карте (M, A). * |legend-columns <число>| = указывает количество столбцов легенды (M, A; по умолчанию: |2|). * |map-comment <текст> | = необязательный комментарий, отображаемый в заголовке карты (M). * |statistics <explo/topo/carto/copyright all/off/number>| или * |statistics <explo/topo-length on/hide/off>| = отобразить некоторые основные статистические данные; если установлено значение |off|, то члены команды сортируются \NEW{5.4} в алфавитном порядке; в противном случае в зависимости от их вклада в работу (M, A; по умолчанию: |off|). * |scale-bar <длина> <единицы> | = установить длину шкалы (M, A). * |language <xx[_YY]>| = установить язык вывода. Доступные языки перечис\-лены на странице авторских прав. Смотрите {\it Приложение}, если вы хотите добавить или настроить переводы. (M, A). * |colo[u]r <item> <цвет>| = настроить цвет для специальных элементов карты (|map-fg|, |map-bg|, |preview-above|, |preview-below|, |label|). Цветовой диапазон 0-100 для оттенков серого, [0-100 0-100 0-100] для цветов в пространстве RGB. 

Для |map-fg| вы можете использовать |altitude|, |scrap| или |map| как цвета. В этом случае карта окрашена в соответствии с высотой, скрапом или картой. 

Для |map-bg| вы можете использовать |transparent| чтобы полностью исклю\-чить фон страницы. 

Для подписей вы можете включать/выключать цвет |on/off|. Если |on|, то подписи окрашиваются с использованием цвета связанного скрапа. 

* |debug <on/all/first/second/scrap-names/station-names/off>| = рисовать скрап на разных этапах преобразования в разных цветах, чтобы увидеть, как Therion искажает данные карты. Смотрите описание |scrap| для подробнос\-тей. Точечные символы, расположение которых больше всего изменились во время преобразования, отображаются оранжевым цветом. Если |scrap-names| указано, имена скрапов отображаются для каждого скрапа, |station-names| отображает имя каждой станции съемки. * |survey-level <N/all>| = |N| -- количество уровней съемки, отображаемых рядом с именем станции (M, A; по умолчанию: |0|). 

{\it Относящиеся к PDF:}\Nobreak 

* |doc-author <текст>| = установить автора документа (M, A). * |doc-keywords <текст>| = установить ключевые слова документа (M, A). * |doc-subject <текст>| = задать тему документа (M, A). * |doc-title <текст> | = установить название документа (M, A). 

{\it Настройка:}\Nobreak 

* |code <metapost/tex-map/tex-atlas>| = Добавить/переопределить макросы\break \TeX\ и \MP. Это позволяет пользователю настраивать различные элементы (например, пользовательские символы, макет карты и атласа в одном месте и т.д.). Для подробностей смотрите главу {\it Изменение макета}. * |endcode| = должен заканчивать разделы TeX\ и \MP.\endcomopt

\midinsert

%  \ifx\pdfoutput\undefined\else
%    \pdfximage {pic/page.pdf}%
%  \fi
%  \vbox to 482bp{\centerline{\hbox to 400bp{%
%    \ifx\pdfoutput\undefined
%      \epsfbox{mp/page.1}%
%    \else
%      \rlap{\pdfrefximage\pdflastximage}%
%      \convertMPtoPDF{mp/page.1}{1}{1}
%    \fi
%    \hss}}\vss
%  }
\vbox to 482bp{\centerline{\hbox to 400bp{ \rlap{\pic{page.pdf}} \MPpic{page.1} \hss}}\vss } \endinsert

%%
\subsubchapter `setup3d'. 

\syntax

\list

* |setup3d <значение>| \endlist

\endsyntax

\NEW{5.3}Temporary hack to set sampling distance in meters when generating piecewise linear 3d model from passage walls made of B{\my\'e}zier curves. 

\subsubchapter `sketch-colors'. 

\syntax

\list

* |sketch-colors <number-of-colors>| \endlist

\endsyntax

\NEW{5.4} Этот параметр можно использовать для уменьшения размера растровых изо\-бражений эскиза на картах. 

\subsubchapter `export'. 

\description

Экспортирует выбранные съемки или карты. \enddescription

\syntax

\list

* |export <тип> [ОПЦИИ]| \endlist

\endsyntax

\arguments

* |<тип>| = поддерживаются следующие типы экспорта: 

|model| = 3D-модель пещеры; 

|map| = одностраничная 2D-карта; 

|atlas| = 2D-атлас на нескольких страницах; 

|cave-list| = сводная таблица пещер; 

|survey-list| = сводная таблица съемок; 

|continuation-list| = список возможных продолжений; 

|database| = база данных SQL с ниткой хода. \endarguments

\penalty0 

\options

{\it общие:}\Nobreak * |encoding/enc <кодировка>| = установить кодировку вывода. * |output/o <файл>| = установить выходной файл. Если имя файла не задано, префикс ``|cave.|'' используется с расширением, соответствующим выход\-ному формату. 

Если задано имя выходного файла и не указан выходной формат, формат определяется из расширения имени файла. 

{\it модель:}\Nobreak 

* |format/fmt <формат>| = установить формат вывода модели. В настоящее время поддерживаются следующие форматы вывода: |loch| (собственный формат, по умолчанию), |compass| (plt файл), |survex| (3d файл), |dxf|, |esri| (3d shapefiles), |vrml|, |3dmf| и |kml| (Google Earth). * |enable <walls/[cave/surface-]centerline/splay-shots/surface/all>| и * |disable <walls/[cave/surface-]centerline/splay-shots/surface/all>| = выбирает, какие функции экспортировать, если формат поддерживает его. Поверх\-ность в настоящее время экспортируется только в формате |therion|. * |wall-source <maps/centerline/all>| = установить исходные данные для моде\-лирования стен хода. 

{\it карты/атлас:}\Nobreak 

* |format/fmt <формат>| = установить формат карты. В данный момент поддерживаются форматы |pdf|, |svg|, |xhtml|\[SVG, встроенный в XHTML-файл, который также содержит легенду.], |survex|, |dxf|, |esri|\[ESRI shapefiles. Несколько файлов записываются в каталог с указанным именем файла.], |kml| (Google Earth), |xvi|\[Векторное изображение Xtherion'а. Изображения XVI могут использоваться для рисования карт в масштабе. |Scale| (принято разрешение изображения в 100 DPI) и |grid-size| макета используются в экспорте.] и \NEW{5.3}|bbox|\[Текстовый файл, содержащий географические координаты нижних и верхних правых углов области карты.] для карты; |pdf| для атласа. * |projection <id>| = unique identifier that specifies the map projection type. (See the |scrap| command for details.) 

If there is no map defined, all scraps in the given projection are exported. 

If there are no scraps with the specified projection then Therion will display centreline from selected surveys. * |layout <id>| = use predefined map or atlas layout. * |layout-xxx| = where |xxx| stands for other layout options. Using this you can change some layout properties directly within the export command. * |encoding/enc <encoding>| = set output encoding 

{\it common for lists:}\Nobreak 

* |format/fmt <format>| = set continuation output format. Currently the following output formats are supported: |html| (default), |txt|, \NEW{5.4}|kml|\[For cave-list and continuation-list.] and |dbf|. 

{\it continuation-list:}\Nobreak 

* |attributes <(on)/off>| = set whether to export user defined attributes in continuation list table. * \NEW{5.3}|filter <(on)/off>| = set whether continuations without comment/text should be filtered out. 

{\it cave-list:}\Nobreak 

* |location <on/(off)>| = set whether to export coordinates of cave entrances in the table. * \NEW{5.3}|surveys (on)/off| = exports raw list of caves when set |off|. Otherwise survey structure with aggregated ststistics is also displayed. 

{\it database:}\Nobreak 

* |format/fmt <format>| = currently |sql| and |csv| * |encoding/enc <encoding>| = set output encoding \endoptions

{\it File formats summary:} \nobreak\medskip \bgroup

\leavevmode\kern1em\vbox{\advance\hsize-1em\halign{#\hfil\quad&#\hfil\cr {\it export type}&{\it available formats}\cr\noalign{\smallskip\hrule\smallskip} model &loch, dxf, esri, compass, survex, vrml, 3dmf, kml\cr map &pdf, svg, xhtml, dxf, esri, survex, xvi, kml, \NEW{5.3}bbox\cr atlas &pdf\cr database &sql, \NEW{5.4}csv\cr lists &html, txt, kml, dbf\cr}}\egroup 

\subchapter Running Therion. 

Now, after mastering data and configuration files, we're ready to run Therion. Usually this is done from the command line in the data directory by typing 

|therion| 

The full syntax is 

|therion [-q] [-L] [-l <log-file>] [-s <source-file>] [-p <search-path>] [-b/--bezier] [-d] [-x] [--use-extern-libs] [<cfg-file>]| 

or 

|therion [-h/--help] [-v/--version] [--print-encodings] [--print-environment] [--print-init-file] [--print-library-src] [--print-symbols] [--print-tex-encodings] [--print-xtherion-src]| 

\penalty-200 \arguments

|<cfg-file>| Therion takes only one optional argument: the name of a configuration file. If no name is specified |thconfig| in the current directory is used. If there is no |thconfig| file (e.g.~current directory is not a data directory), Therion exits with an error message. \endarguments

\options

* |-d| = Turn on debugging mode. The current implementation creates a temporary directory named |thTMPDIR| (in your system temporary directory) and does not delete any temporary files. 

%* |-g| =
%  Using this option you can generate a new configuration file.
%  If |cfg-file| is not specified therion will use the |thconfig|
%  file. If the destination file exists, it'll be overwritten.
%  Generate a new configuration file. This will be the given 
%  |<cfg-file>| if specified, or |thconfig| in the current directory if not. 
%  If the file already exists, it will be overwritten.
%        
* |-h, --help| = Display short help. 

%* |-i| =
%        Ignore comments when writing |-g| or |-u| configuration file.
%
* |-L| = Do not create a log-file. Normally therion writes all the messages into a therion.log file in the current directory. 

* |-l <log-file>| = Change the name of the log file. 

* |-p <search-path>| = This option is used to set the search path (or list of colon-separated paths) which therion uses to find its source files (if it doesn't find them in the working directory). 

* |-q| = Run therion in quiet mode. It will print only warning and error messages to STDERR. 

* |--print-encodings| = Print a list of all supported input encodings. 

* |--print-tex-encodings| = Print a list of all supported encodings for PDF output. 

* |--print-init-file| = Print a default initialization file. For more details see the {\it Initialization} section in the {\it Appendix}. 

* |--print-environment| = Print environment settings for therion. 

* |--print-symbols| = Print a list of all therion supported map symbols in |symbols.xhtml| file. 

* |-s <source-file>| = Set the name of the source file. 

%* |-u| =
%        Upgrade the configuration file.
%
* |--use-extern-libs| = Don't copy \TeX\ and \MP\ macros to working directory. \TeX\ and \MP\  should search for them on their own. Use with caution. 

* |-v, --version| = Display version information. 

* |-x| = Generate file `.xtherion.dat' with additional information for XTherion. \endoptions

\subsubchapter XTherion---compiler. 

XTherion makes it easier to run Therion especially on systems without a command line prompt. Compiler window is the default window of XTherion. To run Therion it's enough to open a configuration file and press `F9' or `Compile' button. 

XTherion displays messages from Therion in the lower part of the screen. Each error message is highlighted and is hyperlinked to the source file where the error occurred. 

After a first run there are activated additional menus {\it Survey structure} and {\it Map structure}. User may comfortably select a survey or map for export by double clicking on some of the items in the tree. Simple click in the {\it Survey structure} tree displays some basic information about the survey in the {\it Survey info} menu. 

\endinput

